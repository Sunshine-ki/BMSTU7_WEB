events { }

http {

	upstream backend {
		server localhost:5000 weight=2;
		# dotnet run --urls http://localhost:5004
		# server localhost:5004;
		# server localhost:5006;
	}

	server {
		location /api/v1/ {
			proxy_pass http://backend/;
		}

		location /api/v2/ {
			proxy_pass http://backend/swagger/;
		}

		# http://localhost/img/image.jpg
		location / {
			root /home/lis/university/github/sem_07/BMSTU7_WEB/static;
		}

		location /test {
			return 301 $scheme://$http_host/;
		}

		# http://localhost/legacy/Welcome
		location /legacy/ {
			proxy_pass http://backend/Home/;
		}

		location /admin/ {
			proxy_pass http://adminer:80/;
		}

		location /status {
			stub_status;
		}
	}

}
